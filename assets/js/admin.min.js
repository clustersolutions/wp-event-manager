var Admin=function(){var e,t,n;return{init:function(){jQuery(".tips, .help_tip").tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200}),Admin.timeFormatSettings(),jQuery("input[name=_event_time_format]").on("change",Admin.actions.showSelectedTimeFormat),jQuery("#_event_start_date").length>0&&jQuery("input#_event_start_date").datepicker({format:"yyyy-mm-dd",autoclose:!0,todayHighlight:!0}).on("changeDate",function(){jQuery("#_event_end_date").datepicker("setStartDate",new Date(jQuery(this).val()))}),jQuery("#_event_end_date").length>0&&jQuery("input#_event_end_date").datepicker({format:"yyyy-mm-dd",autoclose:!0,todayHighlight:!0}).on("changeDate",function(){jQuery("#_event_start_date").datepicker("setEndDate",new Date(jQuery(this).val()))}),jQuery("#_event_registration_deadline").length>0&&jQuery("input#_event_registration_deadline").datepicker({format:"yyyy-mm-dd",autoclose:!0,todayHighlight:!0}),jQuery("#_event_expiry_date").length>0&&(jQuery("input#_event_expiry_date").datepicker({format:"yyyy-mm-dd",autoclose:!0,startDate:jQuery("#_event_expiry_date").val()}),jQuery("#_event_expiry_date").on("changeDate",function(e){jQuery("#_event_end_date").datepicker("setStartDate",new Date(jQuery(this).val()))})),jQuery("p.form-field-author").on("click",Admin.author.changeAuthor),jQuery("#setting-event_manager_submission_expire_options").on("change",Admin.settings.selectEventExpiryOption),jQuery(".wp_event_manager_upload_file_button").live("click",Admin.fileUpload.addFile),jQuery(".wp_event_manager_add_another_file_button").live("click",Admin.fileUpload.addAnotherFile)},timeFormatSettings:function(){var e="H:i";jQuery('input[name="_event_time_format"]').length>0&&"12_hour_format"==jQuery("input[name=_event_time_format]:checked").val()&&(e="g:i A"),jQuery("#_event_start_time").length>0&&jQuery("#_event_start_time").timepicker({showDuration:!0,step:15,timeFormat:e}),jQuery("#_event_end_time").length>0&&jQuery("#_event_end_time").timepicker({showDuration:!0,step:15,timeFormat:e})},actions:{showSelectedTimeFormat:function(e){e.preventDefault(),jQuery('input[name="_event_time_format"]').length>0&&Admin.timeFormatSettings()}},author:{changeAuthor:function(e){return jQuery(this).closest("p").find(".current-author").hide(),jQuery(this).closest("p").find(".change-author").show(),!1}},settings:{selectEventExpiryOption:function(e){var t=jQuery("#setting-event_manager_submission_expire_options option:selected").val();"days"==t?jQuery("#setting-event_manager_submission_duration").closest("tr").show():jQuery("#setting-event_manager_submission_duration").closest("tr").hide(),e.preventDefault()}},fileUpload:{addFile:function(a){return a.preventDefault(),n=jQuery(this).closest(".file_url"),t=n.find("input"),e?void e.open():(e=wp.media.frames.file_frame=wp.media({title:jQuery(this).data("uploader_title"),button:{text:jQuery(this).data("uploader_button_text")},multiple:!1}),e.on("select",function(){attachment=e.state().get("selection").first().toJSON(),jQuery(t).val(attachment.url)}),void e.open())},addAnotherFile:function(e){e.preventDefault();var t=(jQuery(this).closest(".form-field"),jQuery(this).data("field_name")),n=jQuery(this).data("field_placeholder"),a=jQuery(this).data("uploader_button_text"),i=jQuery(this).data("uploader_button");jQuery(this).before('<span class="file_url"><input type="text" name="'+t+'[]" placeholder="'+n+'" /><button class="button button-small wp_event_manager_upload_file_button" data-uploader_button_text="'+a+'">'+i+"</button></span>")}}}};Admin=Admin(),jQuery(document).ready(function(e){Admin.init()});